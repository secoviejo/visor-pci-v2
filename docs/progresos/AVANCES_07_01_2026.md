# Informe de Progresos - 07 de Enero de 2026

## Objetivos Alcanzados hoy
Hoy se ha realizado una reestructuración importante en la gestión de hardware y visualización de alarmas PCI en el campus.

### 1. Gestión de Pasarelas Modbus por Edificio
- **Multi-cliente**: Se ha refactorizado el motor de Modbus para permitir conexiones independientes a múltiples edificios de forma simultánea.
- **Configuración dinámica**: Añadido panel en la sección administrativa para configurar IP y Puerto Modbus para cada edificio individualmente.

### 2. Automatización y Visualización en Planos
- **Iconos de Central**: Se han insertado automáticamente iconos de "Central de Incendios" (CIE) en la planta baja de los 79 edificios cargados.
- **Rediseño Estético**: Se ha mejorado el diseño del icono Central, haciéndolo más profesional y aumentando su tamaño para una mejor visibilidad en el mapa.
- **Vinculación de Alarmas Real-Time**: Implementada lógica que vincula alarmas entrantes por Modbus (formato `CIE-H12-...`) con los iconos del plano del edificio correspondiente, activando el parpadeo visual.

### 3. Corrección de Indicadores Globales (Dashboard y Campus)
- **Sincronización de Alarmas**: Se han unificado las consultas de la tabla `alerts` (alarmas reales) y `events` (histórico) para que el contador de "Alertas Activas" del Dashboard sea 100% preciso.
- **Detección de Duplicados**: Se ha implementado un sistema de limpieza y prevención de alarmas duplicadas en el servidor.
- **Indicadores de Campus**: Corregido el parpadeo de los marcadores de edificios en la vista general del campus y las miniaturas del dashboard para alarmas de origen real.

## Archivos Relevantes
- `js/services/modbusService.js` (Lógica multi-cliente)
- `server.js` (Endpoints y lógica de eventos)
- `campus_view.html` y `dashboard.html` (Visualización global)
- `js/app.js` (Parpadeo y visuales de planta)
- `img/central.svg` (Nuevo diseño de icono)

---
*Documento generado automáticamente por Antigravity (IA).*
