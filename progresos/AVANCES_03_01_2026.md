# Avances del Proyecto - 3 de Enero de 2026

Hoy hemos mejorado la interactividad del mapa de campus y la fiabilidad del sistema de persistencia.

## üó∫Ô∏è Mapa de Campus Interactivo

### Nueva L√≥gica de Movimiento (Long Press)
- **Prevenci√≥n de Errores**: Se ha implementado un sistema de **pulsaci√≥n larga (500ms)** para mover los marcadores de edificios.
- **Feedback Visual**: Al mantener pulsado, el marcador aumenta de tama√±o (`scale-125`) para indicar que ha entrado en modo edici√≥n.
- **Diferenciaci√≥n de Acciones**: Un click r√°pido abre los planos del edificio, mientras que la pulsaci√≥n larga activa el movimiento, eliminando desplazamientos accidentales durante la navegaci√≥n.

### Persistencia y Autoguardado
- **Guardado Autom√°tico**: Cada vez que se mueve un edificio, su nueva posici√≥n (`x`, `y`) se guarda inmediatamente en la base de datos SQLite.
- **Correcci√≥n de Errores de API**: Se ha resuelto un problema donde las posiciones no se guardaban debido a tokens de sesi√≥n caducados.
- **Redirecci√≥n de Seguridad**: Se ha mejorado `api.js` para detectar fallos de autenticaci√≥n (401/403) y redirigir al usuario al login, asegurando que el estado del sistema siempre sea consistente.

## ‚öôÔ∏è Backend y Administraci√≥n

### Control de Simulaci√≥n desde Panel de Control
- **Gesti√≥n de Procesos**: Se ha a√±adido la capacidad de **iniciar y detener el simulador Modbus** directamente desde la pantalla de Administraci√≥n (pesta√±a Pasarelas y Hardware).
- **Arranque Limpio**: El programa ya no inicia autom√°ticamente la conexi√≥n al simulador al arrancar, esperando a que el administrador lo habilite manualmente o se detecte hardware real.
- **Interoperabilidad**: El servidor ahora gestiona el ciclo de vida del proceso del simulador en la terminal, permitiendo un "Paro Forzado" si es necesario.

---
*Resumen generado por Antigravity AI - 03/01/2026*
