# Resumen de Progresos - 03/01/2026

## 1. Migración de Almacenamiento Estructurado
- Se ha implementado un nuevo script (`scripts/super_migration.js`) para reorganizar los planos de los edificios.
- Estructura creada: `datos_edificios/Campus/Edificio/planos/`.
- Se han actualizado las rutas en la base de datos para apuntar a esta nueva ubicación.
- Se ha ajustado `server.js` y el frontend (`admin.html`, `app.js`) para servir y visualizar las imágenes desde `/data/`.

## 2. Ajuste de Vista de Campus (Zoom y Pan)
- Se han añadido columnas `offset_x`, `offset_y` y `scale` a la tabla `campuses`.
- Implementado endpoint `PATCH /api/campuses/:id` para guardar estos ajustes de visualización.
- Creada funcionalidad en `campus_view.html` para:
    - Hacer zoom y moverse por el mapa del campus (Pan & Zoom).
    - Botón "Guardar Vista" (solo visible para admin) para persistir la posición y escala inicial deseada para todos los usuarios.

## 3. Carga Masiva de Dispositivos (CSV)
- Implementado endpoint `POST /api/buildings/:id/config` para procesar archivos CSV de configuración.
- Añadida sección "Elementos existentes" en `admin.html` (dentro de "Cargar planos edificios", al seleccionar un edificio).
- Funcionalidad de "Drag & Drop" para subir el archivo `dispositivos.csv`.
- Lógica de "Sincronización Completa": al subir el CSV, se eliminan los dispositivos anteriores del edificio y se insertan los nuevos, mapeándolos automáticamente a sus plantas correspondientes mediante el nombre del archivo de imagen (`planta`).

## Estado Actual
- El sistema permite la gestión completa de planos y la carga masiva de dispositivos, respetando una estructura de carpetas organizada.
- La visualización de los campus es ahora totalmente configurable y persistente, mejorando la experiencia de usuario en pantallas de diferentes tamaños.
